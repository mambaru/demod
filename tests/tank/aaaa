total, , , 
84964
20984 - counters with only zeros
63980 - non zero counters
360341951 - non zero elements

20984*3000*48 = 3 021 696 000


360341951 -> 17 296 413 648
              3 021 696 000


total  | zero counters | non zero counters | mixed counters | non zero elements
78560  |   14241       |         0         |      64319     |    59886481

59 886 481

2874551088 - ok 3Гб
2050704000 - мусор
11312640000 - 11 ГБ


59 886 481

235 680 000

всего счетчиков: 78560 (*3000*48 = 10,53 Гб )
нулевых счетчиков: 14241 (*3000*48 = 1,9 Гб )
актуальных счетчиков: 64319 (*3000*48 = 8,62 Гб )
актуальных значений: 59886481 (*48 = 2,67 Гб, с учетом 16 байтного ключа 3,56 Гб )

Все это прекрасно ложится в v-set в следующих вариантах:
|Имена    | Значения | Индексы      | Примечание |
| mmap    | mmap     | mmap         | Быстрый штатный перезапуск, при креше нужно перестраивать индексы. Как вариант перенести файлы в ramfs и оттуда бэкапить|
| mmap    | mmap     | memory       | Стабильно долгий перезапуск (до 30 мин.), менше лагов. Также значения можно перенести в ramfs |
| leveldb | mmap     | mmap/memory  | Имена хранить в leveldb - повышение надежности, снимаем ограничение на длину имени (сейчас 250Б - иногда не хватает) |
Оверхед на индексы (минимальный):
1. offset pointer (0,22Гб)
2. ключь+offset pointer (0,22Гб)
